/*
 2017 Julian Garnier
 Released under the MIT license
*/
var $jscomp$this=this;
(function(r,q){"function"===typeof define&&define.amd?define([],q):"object"===typeof module&&module.exports?module.exports=q():r.anime=q()})(this,function(){function r(a){if(!g.col(a))try{return document.querySelectorAll(a)}catch(b){}}function q(a){return a.reduce(function(a,d){return a.concat(g.arr(d)?q(d):d)},[])}function t(a){if(g.arr(a))return a;g.str(a)&&(a=r(a)||a);return a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a]}function D(a,b){return a.some(function(a){return a===b})}
function y(a){var b={},d;for(d in a)b[d]=a[d];return b}function E(a,b){var d=y(a),c;for(c in a)d[c]=b.hasOwnProperty(c)?b[c]:a[c];return d}function z(a,b){var d=y(a),c;for(c in b)d[c]=g.und(a[c])?b[c]:a[c];return d}function O(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,d,h){return b+b+d+d+h+h});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);a=parseInt(b[1],16);var d=parseInt(b[2],16),b=parseInt(b[3],16);return"rgb("+a+","+d+","+b+")"}function P(a){function b(a,b,c){0>
c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a);a=parseInt(d[1])/360;var c=parseInt(d[2])/100,d=parseInt(d[3])/100;if(0==c)c=d=a=d;else{var f=.5>d?d*(1+c):d+c-d*c,k=2*d-f,c=b(k,f,a+1/3),d=b(k,f,a);a=b(k,f,a-1/3)}return"rgb("+255*c+","+255*d+","+255*a+")"}function v(a){if(a=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg|rad|turn)?/.exec(a))return a[2]}function Q(a){if(-1<a.indexOf("translate"))return"px";
if(-1<a.indexOf("rotate")||-1<a.indexOf("skew"))return"deg"}function F(a,b){return g.fnc(a)?a(b.target,b.id,b.total):a}function A(a,b){if(b in a.style)return getComputedStyle(a).getPropertyValue(b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function G(a,b){if(g.dom(a)&&D(R,b))return"transform";if(g.dom(a)&&(a.getAttribute(b)||g.svg(a)&&a[b]))return"attribute";if(g.dom(a)&&"transform"!==b&&A(a,b))return"css";if(null!=a[b])return"object"}function S(a,b){var d=Q(b),d=-1<b.indexOf("scale")?
1:0+d;a=a.style.transform;if(!a)return d;for(var c=[],f=[],k=[],h=/(\w+)\((.+?)\)/g;c=h.exec(a);)f.push(c[1]),k.push(c[2]);a=k.filter(function(a,c){return f[c]===b});return a.length?a[0]:d}function H(a,b){switch(G(a,b)){case "transform":return S(a,b);case "css":return A(a,b);case "attribute":return a.getAttribute(b)}return a[b]||0}function I(a,b){var d=/^(\*=|\+=|-=)/.exec(a);if(!d)return a;b=parseFloat(b);a=parseFloat(a.replace(d[0],""));switch(d[0][0]){case "+":return b+a;case "-":return b-a;case "*":return b*
a}}function B(a){return g.obj(a)&&a.hasOwnProperty("totalLength")}function T(a,b){function d(c){c=void 0===c?0:c;return a.el.getPointAtLength(1<=b+c?b+c:0)}var c=d(),f=d(-1),k=d(1);switch(a.property){case "x":return c.x;case "y":return c.y;case "angle":return 180*Math.atan2(k.y-f.y,k.x-f.x)/Math.PI}}function J(a,b){var d=/-?\d*\.?\d+/g;a=B(a)?a.totalLength:a;if(g.col(a))b=g.rgb(a)?a:g.hex(a)?O(a):g.hsl(a)?P(a):void 0;else{var c=v(a);a=c?a.substr(0,a.length-c.length):a;b=b?a+b:a}b+="";return{original:b,
numbers:b.match(d)?b.match(d).map(Number):[0],strings:b.split(d)}}function U(a,b){return b.reduce(function(b,c,f){return b+a[f-1]+c})}function K(a){return(a?q(g.arr(a)?a.map(t):t(a)):[]).filter(function(a,d,c){return c.indexOf(a)===d})}function V(a){var b=K(a);return b.map(function(a,c){return{target:a,id:c,total:b.length}})}function W(a,b){var d=y(b);if(g.arr(a)){var c=a.length;2!==c||g.obj(a[0])?g.fnc(b.duration)||(d.duration=b.duration/c):a={value:a}}return t(a).map(function(a,c){c=c?0:b.delay;
a=g.obj(a)&&!B(a)?a:{value:a};g.und(a.delay)&&(a.delay=c);return a}).map(function(a){return z(a,d)})}function X(a,b){var d={},c;for(c in a){var f=F(a[c],b);g.arr(f)&&(f=f.map(function(a){return F(a,b)}),1===f.length&&(f=f[0]));d[c]=f}d.duration=parseFloat(d.duration);d.delay=parseFloat(d.delay);return d}function Y(a){return g.arr(a)?w.apply(this,a):L[a]}function Z(a,b){var d;return a.tweens.map(function(c){c=X(c,b);var f=c.value,k=H(b.target,a.name),h=d?d.to.original:k,h=g.arr(f)?f[0]:h,m=I(g.arr(f)?
f[1]:f,h),k=v(m)||v(h)||v(k);c.isPath=B(f);c.from=J(h,k);c.to=J(m,k);c.start=d?d.end:a.offset;c.end=c.start+c.delay+c.duration;c.easing=Y(c.easing);c.elasticity=(1E3-Math.min(Math.max(c.elasticity,1),999))/1E3;g.col(c.from.original)&&(c.round=1);return d=c})}function aa(a,b){var d=a.isPath,c=Math.min(Math.max(b-a.start-a.delay,0),a.duration)/a.duration,f=a.round;return U(a.to.numbers.map(function(b,h){var k=a.easing(c,a.elasticity);h=d?0:a.from.numbers[h];b=h+k*(b-h);d&&(b=T(a.value,b));f&&(b=Math.round(b*
f)/f);return b}),a.to.strings)}function ba(a,b){return q(a.map(function(a){return b.map(function(b){var c=G(a.target,b.name);if(c){var d=Z(b,a);b={type:c,property:b.name,animatable:a,tweens:d,duration:d[d.length-1].end,delay:d[0].delay}}else b=void 0;return b})})).filter(function(a){return!g.und(a)})}function M(a,b,d){var c="delay"===a?Math.min:Math.max;return b.length?c.apply(Math,b.map(function(b){return b[a]})):d[a]}function ca(a){var b=E(da,a),d=E(ea,a),c=V(a.targets),f=[],k=z(b,d),h;for(h in a)k.hasOwnProperty(h)||
"targets"===h||f.push({name:h,offset:k.offset,tweens:W(a[h],d)});a=ba(c,f);return z(b,{animatables:c,animations:a,duration:M("duration",a,d),delay:M("delay",a,d)})}function l(a){function b(a){return e.reversed?e.duration-a:a}function d(a){for(var b={},c=e.animations,d=0;d<c.length;d++){var f=c[d],h=f.tweens,h=h.filter(function(b){return a<b.end})[0]||h[h.length-1],h=aa(h,a),g=f.animatable;(0,fa[f.type])(g.target,f.property,h,b,g.id);f.currentValue=h}if(b)for(var k in b)C||(C=A(document.body,"transform")?
"transform":"-webkit-transform"),e.animatables[k].target.style[C]=b[k].join(" ")}function c(a){if(e[a])e[a](e)}function f(){e.remaining&&!0!==e.remaining&&e.remaining--}function k(a){var k=e.duration,m=e.delay,N=e.currentTime,l=e.reversed,p=b(a),p=Math.min(Math.max(p,0),k);e.currentTime=p;e.progress=p/k*100;p<=m&&0!==N&&(d(0),l&&f());p>m&&p<k&&(d(p),e.began||(e.began=!0,c("begin")),c("run"));p>=k&&N!==k&&(d(k),l||f());a>=k&&(e.remaining?(g=h,"alternate"===e.direction&&(e.reversed=!e.reversed)):(e.completed=
!0,e.pause(),c("complete")),u=0);if(e.children)for(a=e.children,k=0;k<a.length;k++)a[k].seek(p);c("update")}a=void 0===a?{}:a;var h,g,u=0,e=ca(a);e.reset=function(){var a=e.direction,b=e.loop;e.currentTime=0;e.progress=0;e.paused=!0;e.began=!1;e.completed=!1;e.reversed="reverse"===a;e.remaining="alternate"===a&&1===b?2:b};e.tick=function(a){h=a;g||(g=h);k((u+h-g)*l.speed)};e.seek=function(a){k(b(a))};e.pause=function(){var a=n.indexOf(e);-1<a&&n.splice(a,1);e.paused=!0};e.play=function(){e.paused&&
(e.paused=!1,g=0,u=e.completed?0:b(e.currentTime),n.push(e),x||ga())};e.reverse=function(){e.reversed=!e.reversed;g=0;u=b(e.currentTime)};e.restart=function(){e.pause();e.reset();e.play()};e.reset();e.autoplay&&e.play();return e}var da={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},ea={duration:1E3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},R="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY".split(" "),
C,g={arr:function(a){return Array.isArray(a)},obj:function(a){return-1<Object.prototype.toString.call(a).indexOf("Object")},svg:function(a){return a instanceof SVGElement},dom:function(a){return a.nodeType||g.svg(a)},str:function(a){return"string"===typeof a},fnc:function(a){return"function"===typeof a},und:function(a){return"undefined"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return g.hex(a)||
g.rgb(a)||g.hsl(a)}},w=function(){function a(a,d,c){return(((1-3*c+3*d)*a+(3*c-6*d))*a+3*d)*a}return function(b,d,c,f){if(0<=b&&1>=b&&0<=c&&1>=c){var k=new Float32Array(11);if(b!==d||c!==f)for(var h=0;11>h;++h)k[h]=a(.1*h,b,c);return function(h){if(b===d&&c===f)return h;if(0===h)return 0;if(1===h)return 1;for(var g=0,e=1;10!==e&&k[e]<=h;++e)g+=.1;--e;var e=g+(h-k[e])/(k[e+1]-k[e])*.1,l=3*(1-3*c+3*b)*e*e+2*(3*c-6*b)*e+3*b;if(.001<=l){for(g=0;4>g;++g){l=3*(1-3*c+3*b)*e*e+2*(3*c-6*b)*e+3*b;if(0===l)break;
var m=a(e,b,c)-h,e=e-m/l}h=e}else if(0===l)h=e;else{var e=g,g=g+.1,n=0;do m=e+(g-e)/2,l=a(m,b,c)-h,0<l?g=m:e=m;while(1e-7<Math.abs(l)&&10>++n);h=m}return a(h,d,f)}}}}(),L=function(){function a(a,b){return 0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(2*(a-1-b/(2*Math.PI)*Math.asin(1))*Math.PI/b)}var b="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),d={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,
.335],[.6,-.28,.735,.045],a],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(b,c){return 1-a(1-b,c)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(b,c){return.5>b?a(2*b,c)/2:1-a(-2*b+2,c)/2}]},c={linear:w(.25,.25,.75,.75)},f={},k;for(k in d)f.type=k,d[f.type].forEach(function(a){return function(d,
f){c["ease"+a.type+b[f]]=g.fnc(d)?d:w.apply($jscomp$this,d)}}(f)),f={type:f.type};return c}(),fa={css:function(a,b,d){return a.style[b]=d},attribute:function(a,b,d){return a.setAttribute(b,d)},object:function(a,b,d){return a[b]=d},transform:function(a,b,d,c,f){c[f]||(c[f]=[]);c[f].push(b+"("+d+")")}},n=[],x=0,ga=function(){function a(){x=requestAnimationFrame(b)}function b(b){if(n.length){for(var c=0;c<n.length;c++)n[c].tick(b);a()}else cancelAnimationFrame(x),x=0}return a}();l.version="2.0.0";l.speed=
1;l.running=n;l.remove=function(a){a=K(a);for(var b=n.length-1;0<=b;b--)for(var d=n[b],c=d.animations,f=c.length-1;0<=f;f--)D(a,c[f].animatable.target)&&(c.splice(f,1),c.length||d.pause())};l.getValue=H;l.path=function(a,b){var d=g.str(a)?r(a)[0]:a,c=b||100;return function(a){return{el:d,property:a,totalLength:d.getTotalLength()*(c/100)}}};l.setDashoffset=function(a){var b=a.getTotalLength();a.setAttribute("stroke-dasharray",b);return b};l.bezier=w;l.easings=L;l.timeline=function(a){var b=l(a);b.duration=
0;b.children=[];b.add=function(a){t(a).forEach(function(a){var c=a.offset,d=b.duration;a.autoplay=!1;a.offset=g.und(c)?d:I(c,d);a=l(a);a.duration>d&&(b.duration=a.duration);b.children.push(a)});return b};return b};l.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};return l});
